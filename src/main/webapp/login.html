<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <style>
        .error-message {
            color: red;
            display: none;
        }
    </style>
</head>
<body>
    <h2>Login</h2>
    <form action="log_in" method="post">
        <label for="username">Username:</label>
        <input type="text" id="username" name="username" required><br><br>
        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required><br><br>
        <button type="submit">Login</button>
    </form>
    <p id="error-message" class="error-message">Authentication failed. Please try again.</p>

    <!-- Não sai da pagina de login enquanto não autenticar -->
    <script>
        // Function to get URL parameters
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            ret = results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
            console.log("getUrlParameter(" + name + ") returns -> '" + ret + "'");
        }

        // Check if the error parameter is present in the URL
        var error = getUrlParameter('error');
        if (error === 'true') {
            document.getElementById('error-message').style.display = 'block';
        }
    </script>
</body>
</html>
